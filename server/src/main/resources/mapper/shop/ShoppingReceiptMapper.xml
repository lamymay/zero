<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- Mybatis mapper for ShoppingReceipt  Auto generated by fms-mybatis-generator -->
<mapper namespace="com.arc.zero.mapper.shop.ShoppingReceiptMapper">
    <resultMap id="shoppingReceipt" type="com.arc.core.model.domain.shop.ShoppingReceipt">
        <id property="id" column="shopping_receipt_id" javaType="long" jdbcType="BIGINT"/>
        <result property="name" column="shopping_receipt_name" javaType="string" jdbcType="VARCHAR"/>
        <result property="shopCode" column="shopping_receipt_shop_code" javaType="string" jdbcType="VARCHAR"/>
        <result property="cashRegisterCode" column="shopping_receipt_cash_register_code" javaType="string"
                jdbcType="VARCHAR"/>
        <result property="transactionType" column="shopping_receipt_transaction_type" javaType="string"
                jdbcType="VARCHAR"/>
        <result property="cashierId" column="shopping_receipt_cashier_id" javaType="long" jdbcType="BIGINT"/>
        <result property="shoppingReceiptId" column="shopping_receipt_shopping_receipt_id" javaType="int"
                jdbcType="INTEGER"/>
        <result property="orderId" column="shopping_receipt_order_id" javaType="int" jdbcType="INTEGER"/>
        <result property="nameEnglish" column="shopping_receipt_name_english" javaType="string" jdbcType="VARCHAR"/>
        <result property="priceUnit" column="shopping_receipt_price_unit" javaType="string" jdbcType="VARCHAR"/>
        <result property="totalAmount" column="shopping_receipt_total_amount" javaType="int" jdbcType="INTEGER"/>
        <result property="totalFinalPrice" column="shopping_receipt_total_final_price" javaType="int"
                jdbcType="INTEGER"/>
        <result property="totalDiscount" column="shopping_receipt_total_discount" javaType="int" jdbcType="INTEGER"/>
        <result property="change" column="shopping_receipt_change" javaType="int" jdbcType="INTEGER"/>
        <result property="receivable" column="shopping_receipt_receivable" javaType="int" jdbcType="INTEGER"/>
        <result property="receipts" column="shopping_receipt_receipts" javaType="int" jdbcType="INTEGER"/>
        <result property="payWay" column="shopping_receipt_pay_way" javaType="string" jdbcType="VARCHAR"/>
        <result property="remark" column="shopping_receipt_remark" javaType="string" jdbcType="VARCHAR"/>
        <result property="state" column="shopping_receipt_state"/>
        <result property="avatar" column="shopping_receipt_avatar" javaType="string" jdbcType="VARCHAR"/>
        <result property="consumerHoline" column="shopping_receipt_consumer_hotline" javaType="string"
                jdbcType="VARCHAR"/>
        <result property="transactionTime" column="shopping_receipt_transaction_time" javaType="java.time.LocalDateTime"
                jdbcType="TIMESTAMP"/>
        <result property="createTime" column="shopping_receipt_create_time" javaType="java.time.LocalDateTime"
                jdbcType="TIMESTAMP"/>
        <result property="updateTime" column="shopping_receipt_update_time" javaType="java.time.LocalDateTime"
                jdbcType="TIMESTAMP"/>
    </resultMap>

    <sql id="sqlShoppingReceiptColumns">
		shopping_receipt_.id AS shopping_receipt_id,
		shopping_receipt_.name AS shopping_receipt_name,
		shopping_receipt_.shop_code AS shopping_receipt_shop_code,
		shopping_receipt_.cash_register_code AS shopping_receipt_cash_register_code,
		shopping_receipt_.transaction_type AS shopping_receipt_transaction_type,
		shopping_receipt_.cashier_id AS shopping_receipt_cashier_id,
		shopping_receipt_.shopping_receipt_id AS shopping_receipt_shopping_receipt_id,
		shopping_receipt_.order_id AS shopping_receipt_order_id,
		shopping_receipt_.name_english AS shopping_receipt_name_english,
		shopping_receipt_.price_unit AS shopping_receipt_price_unit,
		shopping_receipt_.total_amount AS shopping_receipt_total_amount,
		shopping_receipt_.total_final_price AS shopping_receipt_total_final_price,
		shopping_receipt_.total_discount AS shopping_receipt_total_discount,
		shopping_receipt_.change AS shopping_receipt_change,
		shopping_receipt_.receivable AS shopping_receipt_receivable,
		shopping_receipt_.receipts AS shopping_receipt_receipts,
		shopping_receipt_.pay_way AS shopping_receipt_pay_way,
		shopping_receipt_.remark AS shopping_receipt_remark,
		shopping_receipt_.state AS shopping_receipt_state,
		shopping_receipt_.avatar AS shopping_receipt_avatar,
		shopping_receipt_.consumer_hotline AS shopping_receipt_consumer_hotline,
		shopping_receipt_.transaction_time AS shopping_receipt_transaction_time,
		shopping_receipt_.create_time AS shopping_receipt_create_time,
		shopping_receipt_.update_time AS shopping_receipt_update_time
	</sql>

    <select id="get" parameterType="long" resultMap="shoppingReceipt">
        SELECT
        <include refid="sqlShoppingReceiptColumns"/>
        FROM t_shopping_receipt shopping_receipt_
        WHERE shopping_receipt_.id = #{id,jdbcType=BIGINT}
    </select>
    <select id="list" resultMap="shoppingReceipt">
        SELECT
        <include refid="sqlShoppingReceiptColumns"/>
        FROM t_shopping_receipt shopping_receipt_
    </select>
    <select id="count" resultType="int">
       SELECT	count( * )FROM	`t_shopping_receipt`
    </select>

    <insert id="save" parameterType="com.arc.core.model.domain.shop.ShoppingReceipt" useGeneratedKeys="true"
            keyProperty="id">
		INSERT INTO t_shopping_receipt (
			`name`,
			shop_code,
			cash_register_code,
			transaction_type,
			cashier_id,
			shopping_receipt_id,
			order_id,
			name_english,
			price_unit,
			total_amount,
			total_final_price,
			total_discount,
			`change`,
			receivable,
			receipts,
			pay_way,
			remark,
			`state`,
			avatar,
			consumer_hotline,
			transaction_time,
			create_time
		)
        VALUES (
			#{name,jdbcType=VARCHAR},
			#{shopCode,jdbcType=VARCHAR},
			#{cashRegisterCode,jdbcType=VARCHAR},
			#{transactionType,jdbcType=VARCHAR},
			#{cashierId,jdbcType=INTEGER},
			#{shoppingReceiptId,jdbcType=INTEGER},
			#{orderId,jdbcType=INTEGER},
			#{nameEnglish,jdbcType=VARCHAR},
			#{priceUnit,jdbcType=VARCHAR},
			#{totalAmount,jdbcType=INTEGER},
			#{totalFinalPrice},
			#{totalDiscount,jdbcType=INTEGER},
			#{change,jdbcType=INTEGER},
			#{receivable,jdbcType=INTEGER},
			#{receipts,jdbcType=INTEGER},
			#{payWay,jdbcType=VARCHAR},
			#{remark,jdbcType=VARCHAR},
			#{state},
			#{avatar},
			#{consumerHoline},
			#{transactionTime},
		    now()

		)
	</insert>

    <update id="update" parameterType="com.arc.core.model.domain.shop.ShoppingReceipt">
        UPDATE t_shopping_receipt
        <set>
            <if test="name != null and name != ''">name = #{name,jdbcType=VARCHAR},</if>
            <if test="shopCode != null and shopCode != ''">shop_code = #{shopCode,jdbcType=VARCHAR},</if>
            <if test="cashRegisterCode != null and cashRegisterCode != ''">cash_register_code =
                #{cashRegisterCode,jdbcType=VARCHAR},
            </if>
            <if test="transactionType != null and transactionType != ''">transaction_type =
                #{transactionType,jdbcType=VARCHAR},
            </if>
            <if test="cashierId != null">cashier_id = #{cashierId,jdbcType=INTEGER},</if>
            <if test="shoppingReceiptId != null">shopping_receipt_id = #{shoppingReceiptId,jdbcType=INTEGER},</if>
            <if test="orderId != null">order_id = #{orderId,jdbcType=INTEGER},</if>
            <if test="nameEnglish != null and nameEnglish != ''">name_english = #{nameEnglish,jdbcType=VARCHAR},</if>
            <if test="priceUnit != null and priceUnit != ''">price_unit = #{priceUnit,jdbcType=VARCHAR},</if>
            <if test="totalAmount != null">total_amount = #{totalAmount,jdbcType=INTEGER},</if>
            <if test="totalFinalPrice != null">total_final_price = #{totalFinalPrice,jdbcType=INTEGER},</if>
            <if test="totalDiscount != null">total_discount = #{totalDiscount,jdbcType=INTEGER},</if>
            <if test="change != null">change = #{change,jdbcType=INTEGER},</if>
            <if test="receivable != null">receivable = #{receivable,jdbcType=INTEGER},</if>
            <if test="receipts != null">receipts = #{receipts,jdbcType=INTEGER},</if>
            <if test="payWay != null and payWay != ''">pay_way = #{payWay,jdbcType=VARCHAR},</if>
            <if test="remark != null and remark != ''">remark = #{remark,jdbcType=VARCHAR},</if>
            <if test="state != null">state = #{state},</if>
            <if test="avatar != null and avatar != ''">avatar = #{avatar,jdbcType=VARCHAR},</if>
            <if test="consumerHoline != null and consumerHoline != ''">consumer_hotline =
                #{consumerHoline,jdbcType=VARCHAR},
            </if>
            <if test="transactionTime != null">transaction_time = #{transactionTime,jdbcType=TIMESTAMP},</if>
            <if test="updateTime != null">update_time = #{updateTime,jdbcType=TIMESTAMP},</if>
        </set>
        WHERE id = #{id,jdbcType=BIGINT}
    </update>

</mapper>
